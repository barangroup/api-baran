//
//
//

const db = require('db');

module.exports = insert;

async function insert(user, cb) {

  cb = cb || function() {};

  if (!user && !user.phone_number) {
    return cb({
      status: 400,
      err: new Error('low args')
    });
  }

  let exists = await db.users.findOne({
    phone_number: user.phone_number
  }, {
    _id: true
  });

  if (exists && exists._id) {
    return cb(null, ture);
  }

  db.users(user).save((err) => {
    if (err) {
      return cb({
        status: 500,
        err
      });
    }

    cb();
  })
}
